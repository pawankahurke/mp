## Old cheangelog

## 25-08-2022

- ncp-705-ErrorModifyUser - fix bug update user info ( ncp-705-errormodifyuser )

# Version dashboard-v7780 24-08-2022

## 24-08-2022

- addDocsOptionsMail - Add docs options mail ( adddocsoptionsmail )

# Version dashboard-v7769 24-08-2022

## 23-08-2022

- changeTempleteToMail - Change templete to mail ( changetempletetomail )

# Version dashboard-v7695 19-08-2022

## 24-08-2022

- NCP-714 Fix auth test (add function updatepasswrd to whitelist )

## 19-08-2022

- ssoToWhitelist - add sso to whitelist ( ssotowhitelist )

## 19-08-2022

- ncp-695-HTTPHeaders - add http headers ( ncp-695-httpheaders )
- ncp-695-HTTPHeaders - add Permissions-Polic, X-Permitted-Cross-Domain-Policies, Clear-Site-Data

## 17-08-2022

- test-tests - Test tests ( test-tests )

# Version dashboard-v7623 16-08-2022

## 16-08-2022

- ncp-672-hidePassword - hide password on frontend ( ncp-672-hidepassword )

## 12-08-2022

- ncp-637-newTemplateMassage - Ncp 637 new template massage ( ncp-637-newtemplatemassage )

# Version dashboard-v7429 10-08-2022

## 15-08-2022

- NCP-701-fix-gateway-api-in-mportal - NCP-701-fix-gateway-api-in-mportal ( ncp-701-fix-gateway-api-in-mportal )

# Version dashboard-v7522 13-08-2022

## 09-08-2022

- NCP-694 hide php version header

# Version dashboard-v7429 10-08-2022

## 09-08-2022

- NCP-687 Darts list optimization
- dieIfnoRoles - Add role checks nhRole::dieIfnoRoles ( dieifnoroles )

## 05-08-2022

- NCP-685 Fix and optimize a query on Compliance page
- NCP-668 Privilage Escalation - Incomplete Authorisation Checks
- NCP-671 Unrestricted User Self registration (Allow to block self registration)
- ncp-638-not-send-ressetPassword - Draft: fix send massege ( ncp-638-not-send-ressetpassword )

# Version dashboard-v7361 05-08-2022

## 03-08-2022

- NCP-654 Notifications not getting created

## 27-07-2022

- ncp-580 - Moved fields in ui table ( ncp-580 )
- ncp-595-unauthirized-access - Ncp 595 unauthirized access ( ncp-595-unauthirized-access )
- ncp-279-invalid-auth - fix error 5 incorrect password ( ncp-279-invalid-auth )
- ncp-556 - added eslint ( ncp-556 )

# Version dashboard-v7227 27-07-2022

## 27-07-2022

- NCP-554 Add clientversion to cenus table
- NCP-568 Add Cache in redis for mportal service

# Version dashboard-v7162 27-07-2022

## 26-07-2022

- NCP-636_IGOR_ZUEV - NCP-636 Add sort state on "Software Distribution Configuration, Software Distribution" pages ( ncp-636-igor-zuev )
- NCP-634_IGOR_ZUEV - NCP-634 add sort state on "Census" page ( ncp-634-igor-zuev )
- NCP-640_IGOR_ZUEV - NCP-640 Add sort state on "Dart Audit" page ( ncp-640-igor-zuev )

# Version dashboard-v7115 26-07-2022

## 25-07-2022

- NCP-626_IGOR_ZUEV - NCP-626 replace all toAny() on search pages ( ncp-626-igor-zuev )

## 24-07-2022

- NCP-625_IGOR_ZUEV - NCP-625 Fixed loader ( ncp-625-igor-zuev )
- NCP-621_IGOR_ZUEV - NCP-621 Fix sort and search on "Automation Audit" page ( ncp-621-igor-zuev )

> > > > > > > CHANGELOG.md

## 21-07-2022

- ncp-608-eventsArchive - create events archive before delete ( ncp-608-eventsarchive )
- NCP-618 change workflow to wait for tests from human before push not urgent changes to prod.
- insecure-curl-for-adm - insecure curl for adm ( insecure-curl-for-adm )
- ncp-605-localMail-test - Ncp 605 local mail test ( ncp-605-localmail-test )
- NCP-620_IGOR_ZUEV - NCP-620 Fixed sort state "Profiles" page ( ncp-620-igor-zuev )
- NCP-610_IGOR_ZUEV - NCP-610 "Igor zuev" Fixed sort and search on "Alert Configuration" page ( ncp-610-igor-zuev )
- NCP-619_IGOR_ZUEV - fix sort state ( ncp-619-igor-zuev )

## 20-07-2022

- NCP-614_IGOR_ZUEV - NCP-614 fix sort when click next page ( ncp-614-igor-zuev )
- NCP-613_IGOR_ZUEV - NCP-613. Fixed search and sort on "Users" page ( ncp-613-igor-zuev )

## 19-07-2022

- NCP-555 test for queue for rpc
- NCP-603 Fix site list for staging

# Version dashboard-v6911 19-07-2022

## 19-07-2022

- NCP-604_IGOR_ZUEV - Fixed output widget calendar ( ncp-604-igor-zuev )

## 18-07-2022

- NCP-600_IGOR_ZUEV - Fix sort and search on "Groups" page ( ncp-600-igor-zuev )
- NCP-599_IGOR_ZUEV - Fixed sort and search on "Login Information" page ( ncp-599-igor-zuev )
- ncp-598-fix-limit-time-script - add limit time for script cron ( ncp-598-fix-limit-time-script )
- NCP-601_IGOR_ZUEV - Fixed sort UI ( ncp-601-igor-zuev )

# Version dashboard-v6856 18-07-2022

## 18-07-2022

- NCP-597_IGOR_ZUEV - Fixed sort by time and darts in "Dart Audit " page ( ncp-597-igor-zuev )

## 18-07-2022

- NCP-531 use custom node commands to run tests with adding events to report service
- NCP-595 Unauthorized Access (Site-Wide)#PT10343_10

# Version dashboard-v6835 17-07-2022

## 16-07-2022

- NCP-596_IGOR_ZUEV - Resolve NCP-596 "Igor zuev" ( ncp-596-igor-zuev )

## 15-07-2022

- NCP-594 Add additional filtration to all get and post variables
- NCP-587 Send notifications to ms-teams for all Fatal errors in php code.

## 14-07-2022

- ncp-575-lock-for-login - fix block account at login ( ncp-575-lock-for-login )
- ncp-591-btn-logout - add button logout ( ncp-591-btn-logout )
- NCP-584_IGOR_ZUEV - Resolve NCP-584 Moved the check and update of the active sort element into a separate function ( ncp-584-igor-zuev )
- NCP-592_IGOR_ZUEV - Resolve NCP-592 "Igor zuev" ( ncp-592-igor-zuev )
- NCP-593_IGOR_ZUEV - Resolve NCP-593 "Igor zuev" ( ncp-593-igor-zuev )
- NCP-584_IGOR_ZUEV - Resolve NCP-584 Moved the check and update of the active sort element into a separate function ( ncp-584-igor-zuev )

## 13-07-2022

- NCP-569_IGOR_ZUEV - fixed sort by date ( ncp-569-igor-zuev )

# Version dashboard-v6742 13-07-2022

## 13-07-2022

- NCP-578 Add client version to mportal census list

## 12-07-2022

- NCP-574_IGOR_ZUEV - Fix sort on "Notification, Compliance, Census" pages NCP-574 ( ncp-574-igor-zuev )
- NCP-572 remove \*Perm tables

# Version dashboard-v6564 08-07-2022

## 07-07-2022

- NCP-526 run redis reintialisation after change alerts and redis pod restarts
- test-merge-changelog - test ( test-merge-changelog )

# Version dashboard-v1

## 07-07-2022

- NCP-559 - jira automation
- NCP-560 - jira automation

## 06-07-2022

- ncp-558-add-changelog - test gitlab changelog ( ncp-558-add-changelog )

## 03-07-2022

- NCP-549_IGOR_ZUEV - Removed check for integer in saveSelectState() ( ncp-549-igor-zuev )

## 29-06-2022

- NCP-354_IGOR_ZUEV - uncommented reload page ( ncp-354-igor-zuev )

## 29-06-2022

- ncp_528 - changed darts tests ( ncp-528 )

## 29-06-2022

IMPROVEMENTS:

- Add Static Code Analysis Tools

## 28-06-2022

- ncp_528 - fixed tests ( ncp-528 )

## 27-06-2022

- NCP-423_IGOR_ZUEV - Resolve NCP-423 "Igor zuev" ( ncp-423-igor-zuev )

## 30-06-2022

- add-rules-delete-events - add rulet to delete events ( add-rules-delete-events )

## 27-06-2022

- ignore - VARS_UpdateHistory BUG FIXES:
- Add depth BUG FIXES:

## 22-06-2022

BUG FIXES:

- Add CURLOPT_TIMEOUT=30 for all calls
- remove migration scripts

## 23-06-2022

- FULL CREATE CHANGELOG

BUG FIXES:

- Fix DB env var's for local development

## 10-06-2022

FEATURES:

- Mportal api via own gateway

## 09-06-2022

BUG FIXES:

- Add LOG_LEVEL
- Fix sync issue

## 07-06-2022

BUG FIXES:

- replace `addslashes\(` ===> `safe_addslashes(`

## 30-05-2022

FEATURES:

- Scrollbar for right menus

## 16-05-2022

IMPROVEMENTS:

- Check upload notification

## 12-05-2022

BUG FIXES:

- NCP-478 Fix License Details

IMPROVEMENTS:

- Change system upload file on storage

## 02-05-2022

BUG FIXES:

- Replaced deprected brackets, from \{\W\*?([0-9])\} to [$1]

## 29-04-2022

BUG FIXES:

- Fix NCP-442 and several more sql injections

## 28-04-2022

BUG FIXES:

- Make ajax async

IMPROVEMENTS:

- Add php 7.4 dev image

## 27-04-2022

IMPROVEMENTS:

- jquery update up to 3.6.0

BUG FIXES:

- Hide "Contact Administrator" button

## 26-04-2022

BUG FIXES:

- NCP-443 remove i.php

## 18-04-2022

IMPROVEMENTS:

- Add env var healthz_probe

## 13-04-2022

BUG FIXES:

- Hide loaders correctly.

## 12-04-2022

BUG FIXES:

- NCP-391 DART save Issue
- NCP-396 DART VALUES are not visible at a device level

## 28-03-2022

BUG FIXES:

- fixed saving dart's in MAKE_CURL_CALL func

## 23-03-2022

BREAKING CHANGES:

- hide "Visualisation Weights" from menu (will revert later)

IMPROVEMENTS:

- remove `redis_enable` option

## 22-03-2022

IMPROVEMENTS:

- Add env var mportal_php_fpm_max_children

## 17-03-2022

BUG FIXES:

- fixed default values for the darts

IMPROVEMENTS:

- improve logs system
- remove old code

## 16-03-2022

BUG FIXES:

- NCP-333 fixed saving darts
- Fix tests, remove warnings
- Remove old code, fix bugs
- Replace include to include_once

## 15-03-2022

BUG FIXES:

- Replace !is_array(\*) || safe_count(\*) to safe_count(\*)

## 14-03-2022

BUG FIXES:

- Replace include to include_once

## 05-03-2022

BUG FIXES:

- Fix bug `Empty home page`
- fix safe_array_keys and safe_sizeof
- use safe_sizeof insetad of sizeOf

## 04-03-2022

IMPROVEMENTS:

- Add RedisLink::connect();

## 01-03-2022

IMPROVEMENTS:

- Add DBLock and FileLock class

## 01-03-2022

IMPROVEMENTS:

- Add Lock class
- Remove some elastic search calls
- Use new Lock class in Dashboard/Provision/cron/c-purge.php instead of the old way to make a global lock.

BUG FIXES:

- Add safe_sizeof instead of sizeof

## 28-02-2022

BUG FIXES:

- fix errors in Dashboard/Provision/cron/c-purge.php
- use safe_array_keys instead of array_keys
- Add function mysqli_result
- replace functions mysql\_ to mysqli\_

## 24-02-2022

IMPROVEMENTS:

- remove Migrations code
- move code to Dashboard folder
- getMachineOS_funcCall refactoring

## 23-02-2022

IMPROVEMENTS:

- remove logstashIp calls
- Change logs system
- Add logs class
- error_log( ===> logs::log(**FILE**, **LINE**,

## 01-03-2022

FEATURES:

- NCP-279 Account Lockout after 5 Incorrect login attempts.

## 21-02-2022

IMPROVEMENTS:

- NCP-278 Email OTP login

## 17-02-2022

IMPROVEMENTS:

- Add docs

## 14-02-2022

BUG FIXES:

- Fix for Format_notificationDataMysql
- Fix for php8 `count` function
- ([ (&|])count\( ?\$ ===> $1safe_count($
- if ?\( ?count\(\$([A-z0-9_]+)\) == 0 ===> if (!is_array($$$1) || count($$$1) == 0

## 11-02-2022

BUG FIXES:

- Fix for php 8+ remove `get_magic_quotes_gpc`
- Fix for php8 `count` function
- if ?\( ?count\(\$([A-z0-9_]+)\) > 0 ===> if (is_array($$$1) && count($$$1) > 0
- catch \(Exception \$([A-z0-9]+)\) \{ ===> catch (Exception $$$1) {  error_log($$$1, 0);

## 07-02-2022

BUG FIXES:

- Fix for php8 remove `each` function and replace to foreach
- while ?\(list\(\$([A-z0-9]+) ?, ?\$([A-z0-9]+) ?\) ?= ?each\(\$([A-z0-9]+)\)\) ===> foreach ($$$3 as $$$1 => $$$2)
- while ?\(list\( ?, ?\$([A-z0-9]+) ?\) ?= ?@each\(\$([A-z0-9]+)\)\)

## 03-02-2022

BUG FIXES:

- Fix API_TriggerJob

## 01-02-2022

IMPROVEMENTS:

- remove nginx access_log

## 26-01-2022

BUG FIXES:

- Fix errors after updating to php8

## 11-01-2022

BUG FIXES:

- fix getBrandingUrl and downloading

## 06-01-2022

BUG FIXES:

- fix for Manage Devices page NCP-210
- Improve test for Manage Devices page NCP-210

IMPROVEMENTS:

- Fix csrf check for internal queries
- Remove unuesd logs

## 11-01-2022

BUG FIXES:

- redirect to login page if session is failured NCP-217

## 03-01-2022

BUG FIXES:

- Fix for groupe select element NCP-204

## 27-12-2021

BUG FIXES:

- Add userApproval test

## 21-12-2021

BUG FIXES:

- Fixed complete jobs in "managed devices"

## 13-12-2021

BUG FIXES:

- Fixed startup jobs in "managed devices"
- Added message if OS type equal "unknow"

## 02-12-2021

BUG FIXES:

- Fix for: https://nanoheal.atlassian.net/browse/NCP-152

## 11-11-2021

FEATURES:

- URL class

## 16-11-2021

BUG FIXES:

- DART 304 - Profile management ( Fix for schemaWizFunc on https://lanxess.nanoheal.app/Dashboard/JSONSchema/schemaWizFunc.php function=get_dart_JsonSchema&dartno=304 )

## 05-11-2021

FEATURES:

- ClearString class

## 03-11-2021

BUG FIXES:

- Fix redirect issue (only hot fix, not a good code)

## 29-10-2021

BUG FIXES:

- NCP-112 Fix_nginx_config
  - edited allowed count of `worker_connections`

## 26-10-2021

FEATURES:

- NCP-69 shared_mysql
- DB_PREFIX

IMPROVEMENTS:

- Add changelog file
- Add jira integration

BUG FIXES:

- Fix links in sidebar.php
